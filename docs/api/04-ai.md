# 04 ‚Äî Gera√ß√£o de Conte√∫do com IA

[‚Üê Voltar ao √≠ndice](00-index.md)

---

## POST /api/v1/ai/generate-title

Gera sugest√µes de t√≠tulos com IA.

**Autentica√ß√£o:** Bearer token
**Rate Limit:** 10 req/min

### Request

```json
{
  "topic": "Promo√ß√£o de Black Friday para loja de roupas femininas",
  "social_network": "instagram",
  "tone": "fun",
  "language": "pt_BR"
}
```

| Campo | Tipo | Obrigat√≥rio | Valida√ß√£o |
|-------|------|-------------|-----------|
| `topic` | string | Sim | 10-500 chars |
| `social_network` | string | N√£o | Provider v√°lido. Se omitido, gera gen√©rico |
| `tone` | string | N√£o | `professional`, `casual`, `fun`, `informative`, `inspirational`, `custom`. Padr√£o: configura√ß√£o do usu√°rio |
| `language` | string | N√£o | `pt_BR`, `en_US`, `es_ES`. Padr√£o: configura√ß√£o do usu√°rio |

### Response ‚Äî 200 OK

```json
{
  "data": {
    "generation_id": "dd0e8400-...",
    "suggestions": [
      {
        "title": "Black Friday: at√© 70% OFF em looks incr√≠veis! üñ§",
        "character_count": 50,
        "tone": "fun"
      },
      {
        "title": "O closet dos seus sonhos cabe no seu bolso!",
        "character_count": 44,
        "tone": "fun"
      },
      {
        "title": "A maior liquida√ß√£o do ano come√ßa AGORA üî•",
        "character_count": 42,
        "tone": "fun"
      }
    ],
    "usage": {
      "tokens_input": 120,
      "tokens_output": 85,
      "model": "gpt-4o"
    }
  }
}
```

### Erros

| Status | C√≥digo | Cen√°rio |
|--------|--------|---------|
| 429 | AI_RATE_LIMIT | 10 gera√ß√µes/min ou limite di√°rio atingido |
| 503 | AI_GENERATION_ERROR | Servi√ßo de IA indispon√≠vel |

---

## POST /api/v1/ai/generate-description

Gera descri√ß√£o/legenda otimizada.

**Autentica√ß√£o:** Bearer token
**Rate Limit:** 10 req/min

### Request

```json
{
  "topic": "Promo√ß√£o de Black Friday para loja de roupas femininas",
  "social_network": "instagram",
  "tone": "casual",
  "keywords": ["desconto", "moda", "black friday", "promo√ß√£o"],
  "language": "pt_BR"
}
```

| Campo | Tipo | Obrigat√≥rio | Valida√ß√£o |
|-------|------|-------------|-----------|
| `topic` | string | Sim | 10-500 chars |
| `social_network` | string | N√£o | Provider v√°lido |
| `tone` | string | N√£o | Tone v√°lido |
| `keywords` | string[] | N√£o | M√°x 10 palavras-chave |
| `language` | string | N√£o | Language v√°lido |

### Response ‚Äî 200 OK

```json
{
  "data": {
    "generation_id": "ee0e8400-...",
    "description": "Gente, a Black Friday da [sua loja] chegou e t√° IMPERD√çVEL! üñ§üî•\n\nDescontos de at√© 70% em pe√ßas que v√£o transformar seu guarda-roupa.\n\nCorre que √© por tempo limitado!\n\nüìç Link na bio para aproveitar\nüí≥ Parcele em at√© 10x sem juros",
    "character_count": 248,
    "max_characters": 2200,
    "usage": {
      "tokens_input": 150,
      "tokens_output": 120,
      "model": "gpt-4o"
    }
  }
}
```

---

## POST /api/v1/ai/generate-hashtags

Gera hashtags relevantes.

**Autentica√ß√£o:** Bearer token
**Rate Limit:** 10 req/min

### Request

```json
{
  "topic": "Promo√ß√£o de Black Friday moda feminina",
  "niche": "moda feminina",
  "social_network": "instagram"
}
```

| Campo | Tipo | Obrigat√≥rio | Valida√ß√£o |
|-------|------|-------------|-----------|
| `topic` | string | Sim | 10-500 chars |
| `niche` | string | N√£o | 3-100 chars |
| `social_network` | string | N√£o | Provider v√°lido |

### Response ‚Äî 200 OK

```json
{
  "data": {
    "generation_id": "ff0e8400-...",
    "hashtags": [
      { "tag": "blackfriday", "competition": "high" },
      { "tag": "blackfriday2026", "competition": "medium" },
      { "tag": "modafeminina", "competition": "high" },
      { "tag": "promo√ß√£odemoda", "competition": "low" },
      { "tag": "lookdodia", "competition": "high" },
      { "tag": "descontomoda", "competition": "low" },
      { "tag": "closetdossonhos", "competition": "low" },
      { "tag": "fashionbrasil", "competition": "medium" },
      { "tag": "roupasfemininas", "competition": "medium" },
      { "tag": "liquida√ß√£o", "competition": "medium" }
    ],
    "total": 10,
    "max_for_network": 30,
    "usage": {
      "tokens_input": 80,
      "tokens_output": 60,
      "model": "gpt-4o-mini"
    }
  }
}
```

---

## POST /api/v1/ai/generate-content

Gera conte√∫do completo (t√≠tulo + descri√ß√£o + hashtags) adaptado por rede.

**Autentica√ß√£o:** Bearer token
**Rate Limit:** 10 req/min

### Request

```json
{
  "topic": "Lan√ßamento da cole√ß√£o primavera/ver√£o 2027",
  "social_networks": ["instagram", "tiktok", "youtube"],
  "tone": "inspirational",
  "keywords": ["cole√ß√£o", "primavera", "ver√£o", "tend√™ncia"],
  "language": "pt_BR"
}
```

| Campo | Tipo | Obrigat√≥rio | Valida√ß√£o |
|-------|------|-------------|-----------|
| `topic` | string | Sim | 10-500 chars |
| `social_networks` | string[] | Sim | 1-5 providers v√°lidos |
| `tone` | string | N√£o | Tone v√°lido |
| `keywords` | string[] | N√£o | M√°x 10 palavras-chave |
| `language` | string | N√£o | Language v√°lido |

### Response ‚Äî 200 OK

```json
{
  "data": {
    "generation_id": "a10e8400-...",
    "content_per_network": {
      "instagram": {
        "title": null,
        "description": "A primavera chegou e trouxe a cole√ß√£o mais linda do ano! üå∏‚ú®\n\nPe√ßas leves, cores vibrantes e tend√™ncias que v√£o fazer seu cora√ß√£o bater mais forte.\n\nüëâ Dispon√≠vel no nosso site ‚Äî link na bio\n\n#cole√ß√£oprimavera #modaver√£o #tend√™ncia2027",
        "hashtags": [
          { "tag": "cole√ß√£oprimavera", "competition": "medium" },
          { "tag": "modaver√£o", "competition": "high" },
          { "tag": "tend√™ncia2027", "competition": "low" }
        ],
        "character_count": 245
      },
      "tiktok": {
        "title": "Cole√ß√£o Primavera/Ver√£o 2027 chegou! üå∏",
        "description": "As pe√ßas mais lindas para a temporada! Qual √© o seu look favorito?",
        "hashtags": [
          { "tag": "modaprimavera", "competition": "medium" },
          { "tag": "cole√ß√£o2027", "competition": "low" },
          { "tag": "tend√™ncia", "competition": "high" }
        ],
        "character_count": 64
      },
      "youtube": {
        "title": "Nova Cole√ß√£o Primavera/Ver√£o 2027 | Tend√™ncias",
        "description": "Conhe√ßa todas as pe√ßas da nossa nova cole√ß√£o Primavera/Ver√£o 2027!\n\nNeste v√≠deo voc√™ vai ver:\n- As principais tend√™ncias da temporada\n- Looks completos para diferentes ocasi√µes\n- Dicas de como combinar as pe√ßas\n\nüõí Compre no site: [link]\nüì± Siga no Instagram: @sua.loja",
        "hashtags": [
          { "tag": "moda", "competition": "high" },
          { "tag": "primaveraver√£o2027", "competition": "low" },
          { "tag": "tend√™ncia", "competition": "high" }
        ],
        "character_count": 310
      }
    },
    "usage": {
      "tokens_input": 250,
      "tokens_output": 400,
      "model": "gpt-4o"
    }
  }
}
```

---

## GET /api/v1/ai/settings

Retorna configura√ß√µes de IA do usu√°rio.

**Autentica√ß√£o:** Bearer token

### Response ‚Äî 200 OK

```json
{
  "data": {
    "default_tone": "professional",
    "custom_tone_description": null,
    "default_language": "pt_BR",
    "monthly_generation_limit": 500,
    "usage_this_month": {
      "generations": 127,
      "tokens_input": 15000,
      "tokens_output": 12000,
      "estimated_cost_usd": 0.42
    }
  }
}
```

---

## PUT /api/v1/ai/settings

Atualiza configura√ß√µes de IA.

**Autentica√ß√£o:** Bearer token

### Request

```json
{
  "default_tone": "custom",
  "custom_tone_description": "Tom descontra√≠do e jovem, com uso moderado de emojis, linguagem informal e g√≠rias brasileiras",
  "default_language": "pt_BR"
}
```

### Response ‚Äî 200 OK

---

## GET /api/v1/ai/history

Lista hist√≥rico de gera√ß√µes.

**Autentica√ß√£o:** Bearer token

#### Query Parameters

| Par√¢metro | Tipo | Padr√£o | Descri√ß√£o |
|-----------|------|--------|-----------|
| `type` | string | ‚Äî | `title`, `description`, `hashtags`, `full` |
| `from` | datetime | ‚Äî | Data in√≠cio |
| `to` | datetime | ‚Äî | Data fim |
| `sort` | string | `-created_at` | Ordena√ß√£o |
| `per_page` | integer | 20 | Itens por p√°gina |
| `cursor` | string | ‚Äî | Cursor |

### Response ‚Äî 200 OK

```json
{
  "data": [
    {
      "id": "dd0e8400-...",
      "type": "ai_generation",
      "attributes": {
        "generation_type": "title",
        "input": {
          "topic": "Promo√ß√£o de Black Friday...",
          "social_network": "instagram",
          "tone": "fun"
        },
        "output_preview": "Black Friday: at√© 70% OFF em looks incr√≠veis!...",
        "model": "gpt-4o",
        "tokens_input": 120,
        "tokens_output": 85,
        "cost_estimate_usd": 0.003,
        "created_at": "2026-02-15T10:30:00Z"
      }
    }
  ],
  "meta": { "..." }
}
```
